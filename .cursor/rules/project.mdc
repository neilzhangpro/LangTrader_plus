---
alwaysApply: true
---
nofx_python/
├── README.md
├── requirements.txt
├── .env.example
├── config/
│   ├── __init__.py
│   ├── settings.py          # 应用配置（数据库、API密钥等）
│   └── database.py          # 数据库连接配置
│
├── models/
│   ├── __init__.py
│   ├── user.py              # User 模型
│   ├── ai_model.py          # AIModel 模型
│   ├── exchange.py          # Exchange 模型
│   ├── trader.py            # Trader 模型
│   ├── prompt_template.py   # PromptTemplate 模型
│   ├── signal_source.py     # UserSignalSource 模型
│   ├── trade_record.py      # TradeRecord 模型
│   └── decision_log.py      # DecisionLog 模型
│
├── services/
│   ├── __init__.py
│   ├── trader_manager.py    # 交易员管理器（启动/停止/监控）
│   ├── exchange_service.py  # 交易所服务（CCXT封装）
│   ├── signal_service.py    # 信号源服务（coin_pool, oi_top等）
│   ├── prompt_service.py    # 提示词模板服务
│   └── decision_engine.py   # LangGraph 决策引擎
│
├── decision_engine/
│   ├── __init__.py
│   ├── graph_builder.py     # LangGraph 图构建器
│   ├── nodes/
│   │   ├── __init__.py
│   │   ├── data_collector.py    # 数据收集节点
│   │   ├── signal_analyzer.py   # 信号分析节点
│   │   ├── ai_decision.py       # AI决策节点
│   │   ├── risk_manager.py      # 风险管理节点
│   │   └── order_executor.py    # 订单执行节点
│   └── state.py             # LangGraph 状态定义
│
├── exchanges/
│   ├── __init__.py
│   ├── base.py              # 交易所基类
│   ├── cex_adapter.py       # CEX适配器（Binance, OKX等）
│   └── dex_adapter.py       # DEX适配器（Hyperliquid, Aster等）
│
├── signals/
│   ├── __init__.py
│   ├── coin_pool.py         # Coin Pool 信号源
│   ├── oi_top.py            # OI Top 信号源
│   └── ai_scoring.py        # AI评分信号源
│
├── database/
│   ├── __init__.py
│   ├── migrations/          # Alembic 迁移文件
│   └── init_db.py           # 数据库初始化脚本
│
├── api/
│   ├── __init__.py
│   ├── main.py              # FastAPI 应用入口
│   ├── routes/
│   │   ├── __init__.py
│   │   ├── users.py
│   │   ├── traders.py
│   │   ├── exchanges.py
│   │   ├── ai_models.py
│   │   └── prompt_templates.py
│   └── schemas/             # Pydantic 模式
│       ├── __init__.py
│       ├── user.py
│       ├── trader.py
│       └── ...
│
├── utils/
│   ├── __init__.py
│   ├── logger.py            # 日志工具
│   ├── crypto.py            # 加密工具（密码哈希等）
│   └── validators.py        # 验证工具
│
└── tests/
    ├── __init__.py
    ├── test_decision_engine.py
    ├── test_exchange_service.py
    └── test_trader_manager.py